<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || "Dealo - Buy & Sell Anything" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Dealo">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <%# Enable PWA manifest for installable apps (make sure to enable in config/routes.rb too!) %>
    <%#= tag.link rel: "manifest", href: pwa_manifest_path(format: :json) %>

    <%# Favicon: Maximum size optimization - browsers display at fixed sizes but we use largest sources %>
    <%# Priority order: ICO (can contain multiple sizes) > 32x32 PNG > SVG > others %>
    <link rel="icon" type="image/x-icon" sizes="32x32 16x16" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <%# Also provide larger sources - browser may use these for better quality when scaling %>
    <link rel="icon" type="image/png" sizes="64x64" href="/TabIcon.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/TabIcon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/TabIcon.png">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="shortcut icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">

    <%# Includes all stylesheet files in app/assets/stylesheets %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    <script>
      function initAccountDropdown() {
        // Account dropdown toggle (click to open/close, stays open until click outside)
        const accountToggle = document.getElementById('accountDropdown');
        const accountMenu = document.getElementById('accountDropdownMenu');
        const dropdownContainer = accountToggle ? accountToggle.closest('.dropdown') : null;

        if (!accountToggle || !accountMenu || !dropdownContainer) return;

        // Guard: avoid attaching duplicate listeners across Turbo navigations
        if (dropdownContainer.hasAttribute('data-dropdown-initialized')) return;
        dropdownContainer.setAttribute('data-dropdown-initialized', 'true');

        accountToggle.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();

          const isOpen = dropdownContainer.classList.contains('open');

          // Close any other open dropdowns
          document.querySelectorAll('.dropdown.open').forEach(function(drop) {
            if (drop !== dropdownContainer) {
              drop.classList.remove('open');
            }
          });

          if (isOpen) {
            dropdownContainer.classList.remove('open');
          } else {
            dropdownContainer.classList.add('open');
          }
        });

        // Close on click outside
        document.addEventListener('click', function(e) {
          if (!dropdownContainer.contains(e.target)) {
            dropdownContainer.classList.remove('open');
          }
        });

        // Close on Escape key
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') {
            dropdownContainer.classList.remove('open');
          }
        });
      }

      function initGlobalUiHandlers() {
        // Handle favorite button clicks (both heart icon and save button)
        document.addEventListener('click', function(e) {
          const favoriteBtn = e.target.closest('.favorite-heart-btn, .btn-favorite');
          if (favoriteBtn) {
            e.preventDefault();
            e.stopPropagation();
            
            const listingId = favoriteBtn.dataset.listingId;
            const isFavorited = favoriteBtn.dataset.favorited === 'true';
            let favoriteId = favoriteBtn.dataset.favoriteId;
            
            // If favoriteId is not on button, check container
            if (!favoriteId && favoriteBtn.closest('.favorite-heart-container')) {
              favoriteId = favoriteBtn.closest('.favorite-heart-container').dataset.favoriteId;
            }
            
            const url = isFavorited 
              ? `/listings/${listingId}/favorites/${favoriteId}`
              : `/listings/${listingId}/favorites`;
            const method = isFavorited ? 'DELETE' : 'POST';
            
            fetch(url, {
              method: method,
              headers: {
                'X-CSRF-Token': document.querySelector('meta[name="csrf-token"]').content,
                'Content-Type': 'application/json',
                'Accept': 'application/json'
              },
              credentials: 'same-origin'
            })
            .then(response => response.json())
            .then(data => {
              if (data.status === 'success') {
                const svg = favoriteBtn.querySelector('svg');
                
                if (data.favorited) {
                  favoriteBtn.classList.add('favorite-heart-active', 'btn-favorite-active');
                  favoriteBtn.dataset.favorited = 'true';
                  if (data.favorite_id) {
                    favoriteBtn.dataset.favoriteId = data.favorite_id;
                    if (favoriteBtn.closest('.favorite-heart-container')) {
                      favoriteBtn.closest('.favorite-heart-container').dataset.favoriteId = data.favorite_id;
                    }
                  }
                  if (svg) {
                    svg.setAttribute('fill', 'currentColor');
                  }
                  // Update text for show page button
                  if (favoriteBtn.classList.contains('btn-favorite')) {
                    const textNodes = Array.from(favoriteBtn.childNodes).filter(node => node.nodeType === 3);
                    textNodes.forEach(node => {
                      if (node.textContent.trim() === 'Save Ad') {
                        node.textContent = 'Saved';
                      }
                    });
                  }
                  favoriteBtn.title = 'Remove from favorites';
                } else {
                  favoriteBtn.classList.remove('favorite-heart-active', 'btn-favorite-active');
                  favoriteBtn.dataset.favorited = 'false';
                  favoriteBtn.dataset.favoriteId = '';
                  if (favoriteBtn.closest('.favorite-heart-container')) {
                    favoriteBtn.closest('.favorite-heart-container').dataset.favoriteId = '';
                  }
                  if (svg) {
                    svg.setAttribute('fill', 'none');
                  }
                  // Update text for show page button
                  if (favoriteBtn.classList.contains('btn-favorite')) {
                    const textNodes = Array.from(favoriteBtn.childNodes).filter(node => node.nodeType === 3);
                    textNodes.forEach(node => {
                      if (node.textContent.trim() === 'Saved') {
                        node.textContent = 'Save Ad';
                      }
                    });
                  }
                  favoriteBtn.title = 'Add to favorites';
                  
                  // If on favorites page, remove the card or reload
                  if (window.location.pathname === '/my_saved_ads') {
                    const listingCard = favoriteBtn.closest('.listing-card');
                    if (listingCard) {
                      listingCard.style.transition = 'opacity 0.3s, transform 0.3s';
                      listingCard.style.opacity = '0';
                      listingCard.style.transform = 'scale(0.95)';
                      setTimeout(() => {
                        listingCard.remove();
                        // If no cards left, reload to show empty state
                        if (document.querySelectorAll('.listing-card').length === 0) {
                          window.location.reload();
                        }
                      }, 300);
                    }
                  }
                }
              }
            })
            .catch(error => {
              console.error('Error:', error);
            });
          }
        });

        initAccountDropdown();
      }

      function initBuyDropdown() {
        const buyDropdown = document.querySelector('.buy-dropdown');
        if (!buyDropdown) return;

        const toggleButton = buyDropdown.querySelector('.dropdown-toggle');
        if (!toggleButton) return;

        // Guard: avoid attaching duplicate listeners
        if (buyDropdown.hasAttribute('data-buy-dropdown-initialized')) return;
        buyDropdown.setAttribute('data-buy-dropdown-initialized', 'true');

        toggleButton.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          
          const isOpen = buyDropdown.classList.contains('open');
          
          // Close all other dropdowns
          document.querySelectorAll('.dropdown.open').forEach(function(dropdown) {
            if (dropdown !== buyDropdown) {
              dropdown.classList.remove('open');
            }
          });

          if (isOpen) {
            buyDropdown.classList.remove('open');
          } else {
            buyDropdown.classList.add('open');
          }
        });

        // Close on click outside
        document.addEventListener('click', function(e) {
          if (!buyDropdown.contains(e.target)) {
            buyDropdown.classList.remove('open');
          }
        });

        // Close on Escape key
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') {
            buyDropdown.classList.remove('open');
          }
        });
      }

      // First full page load
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
          initGlobalUiHandlers();
          initBuyDropdown();
        });
      } else {
        initGlobalUiHandlers();
        initBuyDropdown();
      }

      // Hamburger Menu Toggle
      function initHamburgerMenu() {
        const hamburgerBtn = document.getElementById('hamburgerMenuBtn');
        const mobileMenu = document.getElementById('mobileMenu');
        const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
        const mobileMenuClose = document.getElementById('mobileMenuClose');
        const mobileBuyToggle = document.getElementById('mobileBuyToggle');
        const mobileBuySubmenu = document.getElementById('mobileBuySubmenu');

        if (!hamburgerBtn || !mobileMenu) return;

        function openMenu() {
          mobileMenu.classList.add('open');
          mobileMenu.style.pointerEvents = 'auto';
          if (mobileMenuOverlay) {
            mobileMenuOverlay.classList.add('open');
            mobileMenuOverlay.style.pointerEvents = 'auto';
          }
          if (hamburgerBtn) {
            hamburgerBtn.style.opacity = '0';
            hamburgerBtn.style.pointerEvents = 'none';
          }
          document.body.style.overflow = 'hidden';
        }

        function closeMenu() {
          mobileMenu.classList.remove('open');
          mobileMenu.style.pointerEvents = 'none';
          if (mobileMenuOverlay) {
            mobileMenuOverlay.classList.remove('open');
            mobileMenuOverlay.style.pointerEvents = 'none';
          }
          if (hamburgerBtn) {
            hamburgerBtn.style.opacity = '1';
            hamburgerBtn.style.pointerEvents = 'auto';
          }
          document.body.style.overflow = '';
          if (mobileBuySubmenu) {
            mobileBuySubmenu.classList.remove('open');
          }
          if (mobileBuyToggle) {
            mobileBuyToggle.classList.remove('open');
          }
        }

        // Always close menu on page load/navigation (important for login redirects)
        closeMenu();

        hamburgerBtn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          if (mobileMenu.classList.contains('open')) {
            closeMenu();
          } else {
            openMenu();
          }
        });

        if (mobileMenuClose) {
          mobileMenuClose.addEventListener('click', closeMenu);
        }

        if (mobileMenuOverlay) {
          mobileMenuOverlay.addEventListener('click', closeMenu);
        }

        if (mobileBuyToggle && mobileBuySubmenu) {
          mobileBuyToggle.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            mobileBuySubmenu.classList.toggle('open');
            mobileBuyToggle.classList.toggle('open');
          });
        }

        // Close menu when clicking on a menu item (navigation)
        const menuItems = mobileMenu.querySelectorAll('.mobile-menu-item:not(.mobile-menu-toggle)');
        menuItems.forEach(function(item) {
          item.addEventListener('click', function() {
            // Close immediately for better UX
            closeMenu();
          });
        });
      }

      // Ensure menu is closed and body overflow is reset on any navigation
      function resetMobileMenuState() {
        const mobileMenu = document.getElementById('mobileMenu');
        const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
        if (mobileMenu) {
          mobileMenu.classList.remove('open');
          mobileMenu.style.pointerEvents = 'none';
        }
        if (mobileMenuOverlay) {
          mobileMenuOverlay.classList.remove('open');
          mobileMenuOverlay.style.pointerEvents = 'none';
        }
        document.body.style.overflow = '';
      }

      // Turbo navigations (Rails 7)
      document.addEventListener('turbo:load', function() {
        resetMobileMenuState();
        initAccountDropdown();
        initBuyDropdown();
        initHamburgerMenu();
      });
      document.addEventListener('turbo:render', function() {
        resetMobileMenuState();
        initAccountDropdown();
        initBuyDropdown();
        initHamburgerMenu();
      });
      document.addEventListener('turbo:before-visit', function() {
        resetMobileMenuState();
      });

      // Initial load
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
          resetMobileMenuState();
          initHamburgerMenu();
        });
      } else {
        resetMobileMenuState();
        initHamburgerMenu();
      }
    </script>
  </head>

  <body class="<%= 'home-page' if current_page?(root_path) %>">
    <header class="main-header">
      <div class="header-container">
        <div class="header-left">
          <% unless current_page?(root_path) %>
            <button type="button"
                    class="back-nav-btn"
                    aria-label="Go back"
                    onclick="if (window.history.length > 1) { window.history.back(); } else { window.location.href = '<%= root_path %>'; }">
              ← Back
            </button>
          <% end %>
          <div class="logo">
          <%= link_to root_path, class: "logo-link" do %>
            <%= image_tag "/Dealo.ielogodesign.png", alt: "Dealo", class: "logo-image" %>
          <% end %>
          </div>
        </div>
        <nav class="main-nav">
          <%= link_to root_path, class: "nav-link home-icon-link", title: "Home" do %>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="home-icon">
              <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          <% end %>
          <div class="dropdown buy-dropdown">
            <%= link_to "Buy", listings_path, class: "nav-link dropdown-toggle", id: "buyDropdown", role: "button", data: { toggle: "dropdown" } %>
            <div class="dropdown-menu buy-dropdown-menu" aria-labelledby="buyDropdown">
              <%= link_to "All Categories", listings_path, class: "dropdown-item" %>
              <% Category.all.order(:name).each do |category| %>
                <%= link_to category.name, listings_path(category_id: category.id), class: "dropdown-item" %>
              <% end %>
            </div>
          </div>
          <%= link_to "Sell", new_listing_path, class: "nav-link" %>
          <% if user_signed_in? %>
            <%= link_to my_messages_path, class: "nav-link messages-icon-link" do %>
              <svg class="messages-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <% unread_count = current_user.unread_messages_count %>
              <% if unread_count > 0 %>
                <span class="messages-badge"><%= unread_count %></span>
              <% end %>
            <% end %>
          <% end %>
        </nav>
        <!-- Mobile Menu Overlay -->
        <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
        <nav class="mobile-menu" id="mobileMenu">
          <div class="mobile-menu-header">
            <h3>Menu</h3>
            <button class="mobile-menu-close" id="mobileMenuClose" aria-label="Close menu">×</button>
          </div>
          <div class="mobile-menu-content">
            <%= link_to root_path, class: "mobile-menu-item" do %>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>Home</span>
            <% end %>
            <div class="mobile-menu-dropdown">
              <button class="mobile-menu-item mobile-menu-toggle" id="mobileBuyToggle">
                <span>Buy</span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="mobile-menu-arrow">
                  <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
              <div class="mobile-menu-submenu" id="mobileBuySubmenu">
                <%= link_to "All Categories", listings_path, class: "mobile-menu-subitem" %>
                <% Category.all.order(:name).each do |category| %>
                  <%= link_to category.name, listings_path(category_id: category.id), class: "mobile-menu-subitem" %>
                <% end %>
              </div>
            </div>
            <%= link_to "Sell", new_listing_path, class: "mobile-menu-item" %>
            <%= link_to "Place Ad", new_listing_path, class: "mobile-menu-item mobile-menu-primary" %>
            <% if user_signed_in? %>
              <%= link_to my_messages_path, class: "mobile-menu-item" do %>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>My Messages</span>
                <% unread_count = current_user.unread_messages_count %>
                <% if unread_count > 0 %>
                  <span class="mobile-menu-badge"><%= unread_count %></span>
                <% end %>
              <% end %>
              <%= link_to "My Listings", my_listings_path, class: "mobile-menu-item" %>
              <%= link_to "My Saved Ads", my_saved_ads_path, class: "mobile-menu-item" %>
              <%= link_to "Account Settings", edit_user_registration_path, class: "mobile-menu-item" %>
              <hr class="mobile-menu-divider">
              <%= button_to "Logout", destroy_user_session_path, method: :delete, form: { data: { turbo: "false" } }, class: "mobile-menu-item mobile-menu-logout" %>
            <% else %>
              <%= link_to "Sign up or Login", new_user_session_path, class: "mobile-menu-item" %>
            <% end %>
          </div>
        </nav>
        <div class="header-right">
          <button class="hamburger-menu-btn" id="hamburgerMenuBtn" aria-label="Toggle menu">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </button>
          <%= link_to "Place Ad", new_listing_path, class: "btn-place-ad" %>
          <% if user_signed_in? %>
            <div class="dropdown">
              <button class="nav-link dropdown-toggle" type="button" id="accountDropdown">
                <div class="header-avatar-container">
                  <% if current_user.avatar.attached? %>
                    <%= image_tag current_user.avatar, class: "header-avatar" %>
                  <% else %>
                    <div class="header-avatar-placeholder">
                      <%= (current_user.name || current_user.email).first.upcase %>
                    </div>
                  <% end %>
                </div>
                <span class="header-greeting">
                  <% if current_user.name.present? %>
                    Hi <%= current_user.name.split.first %>
                  <% else %>
                    Hi <%= current_user.email.split('@').first %>
                  <% end %>
                </span>
                <span class="dropdown-arrow">▼</span>
              </button>
              <ul class="dropdown-menu" id="accountDropdownMenu">
                <li><%= link_to "My Messages", my_messages_path, class: "dropdown-item" %></li>
                <li><%= link_to "My Listings", my_listings_path, class: "dropdown-item" %></li>
                <li><%= link_to "My Saved Ads", my_saved_ads_path, class: "dropdown-item" %></li>
                <li><hr class="dropdown-divider"></li>
                <li><%= link_to "Account Settings", edit_user_registration_path, class: "dropdown-item" %></li>
                <li>
                  <%= button_to "Logout",
                        destroy_user_session_path,
                        method: :delete,
                        form: { data: { turbo: "false" } },
                        class: "dropdown-item dropdown-logout-btn",
                        form_class: "dropdown-logout-form" %>
                </li>
              </ul>
            </div>
          <% else %>
            <%= link_to "Sign up or Login", new_user_session_path, class: "nav-link nav-login" %>
          <% end %>
        </div>
      </div>
    </header>

    <main class="main-content">
      <%= yield %>
    </main>

    <footer class="main-footer">
      <div class="footer-container">
        <div class="footer-content">
          <!-- Company Info -->
          <div class="footer-section">
            <div class="footer-logo">
              <%= image_tag "/Dealo.ielogodesign.png", alt: "Dealo", class: "footer-logo-image" %>
              <h3 class="footer-logo-text">Dealo</h3>
            </div>
            <p class="footer-description">Free classified ads - Buy and sell anything in your area</p>
            <div class="footer-social">
              <a href="#" class="social-link" aria-label="Facebook">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                </svg>
              </a>
              <a href="#" class="social-link" aria-label="Twitter">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                </svg>
              </a>
              <a href="#" class="social-link" aria-label="Instagram">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                </svg>
              </a>
              <a href="#" class="social-link" aria-label="LinkedIn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                </svg>
              </a>
            </div>
          </div>

          <!-- Quick Links -->
          <div class="footer-section">
            <h4 class="footer-heading">Quick Links</h4>
            <ul class="footer-links">
              <li><%= link_to "Buy", listings_path, class: "footer-link" %></li>
              <li><%= link_to "Sell", new_listing_path, class: "footer-link" %></li>
              <li><%= link_to "Browse All", listings_path, class: "footer-link" %></li>
              <li><%= link_to "Categories", root_path(anchor: "categories"), class: "footer-link" %></li>
            </ul>
          </div>

          <!-- My Account -->
          <% if user_signed_in? %>
          <div class="footer-section">
            <h4 class="footer-heading">My Account</h4>
            <ul class="footer-links">
              <li><%= link_to "My Listings", my_listings_path, class: "footer-link" %></li>
              <li><%= link_to "My Messages", my_messages_path, class: "footer-link" %></li>
              <li><%= link_to "Saved Ads", my_saved_ads_path, class: "footer-link" %></li>
              <li><%= link_to "Account Settings", edit_user_registration_path, class: "footer-link" %></li>
            </ul>
          </div>
          <% else %>
          <div class="footer-section">
            <h4 class="footer-heading">Get Started</h4>
            <ul class="footer-links">
              <li><%= link_to "Sign Up", new_user_registration_path, class: "footer-link" %></li>
              <li><%= link_to "Login", new_user_session_path, class: "footer-link" %></li>
              <li><%= link_to "How It Works", "#", class: "footer-link" %></li>
              <li><%= link_to "Post an Ad", new_listing_path, class: "footer-link" %></li>
            </ul>
          </div>
          <% end %>

          <!-- Help & Support -->
          <div class="footer-section">
            <h4 class="footer-heading">Help & Support</h4>
            <ul class="footer-links">
              <li><%= link_to "Help Center", "#", class: "footer-link" %></li>
              <li><%= link_to "Contact Us", "#", class: "footer-link" %></li>
              <li><%= link_to "Safety Tips", "#", class: "footer-link" %></li>
              <li><%= link_to "FAQs", "#", class: "footer-link" %></li>
            </ul>
          </div>

          <!-- Legal -->
          <div class="footer-section">
            <h4 class="footer-heading">Legal</h4>
            <ul class="footer-links">
              <li><%= link_to "Privacy Policy", "#", class: "footer-link" %></li>
              <li><%= link_to "Terms of Service", "#", class: "footer-link" %></li>
              <li><%= link_to "Cookie Policy", "#", class: "footer-link" %></li>
              <li><%= link_to "Community Guidelines", "#", class: "footer-link" %></li>
            </ul>
          </div>
        </div>

        <!-- Footer Bottom -->
        <div class="footer-bottom">
          <div class="footer-bottom-content">
            <p class="footer-copyright">&copy; <%= Date.current.year %> Dealo. All rights reserved.</p>
            <div class="footer-bottom-links">
              <span>Made with ❤️ in Ireland</span>
            </div>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
